Detailing the implementation of the code.

2025/05/03 12:53

Until now we have a code with the following aspects implemented: 

    - PrimaryGeneratorCRY.

The CRY library is implemented in the code to generate cosmic rays. 

Until now we can get a set of particles coming from the top of the 
world volume with a given direction provided by the CRY library.

? Most of the particles are not arriving to the detector ? Also probably
interesting to simulate the quantum processor to have control of the 
cosmic rays passing through it ??

+ We are not taking care of the times in which the paricles are being 
generated, probably importat for later reconstruction of the cosmic 
ray tracks ?? This can be implemented by simulating a poisson distribution
for the times of the particles.


    - DetectorConstruction and SensitiveDetector.

We have created a detector that consists of two layers of bars, covered 
in a plastic material. 

The bars are set as sensitive detectors to record the energy deposit of the
particles within the bars.

+ The following step would be to define a function to handle manually the 
conversion of the deposited energy into 'optical photons' that travel
along the bar to both extremes and record the arrival time for both 
to reconstruct the track of the incident particle.

+ Probably a implementation of the bar's material as scintillators to let 
g4 handle the internal process of converting the pass of the incident 
particles into optical photons is convenient.

2025/05/05 12:55

    - DetectorMessenger.

Adding a new class to implement the option of choosing the approch to 
follow when simulating the optical photons generated by the 
scintillator material. 

Until now the g4 internal implementation seems to work.

+ Next step should probably be adding manually post processing 
to generate the photons without using g4 optical scintillator method.


2025/05/13 12:14

    - PrimaryGeneratorCRY.

Add a new command to obtain an output of the CRY generated particles 
for further analysis, to check the particles behave correctly.

Add new command to select the verbosity level.

Changing generation of particle to use PrimaryVertex instead of 
ParticleGun to set initial time of the vertex creation with 
respect to the global simulation time.

2025/05/14 12:03

    - DetectorConstruction.

Add SiPM at the extremes of the bars and setting optical properties
for the materials to have g4 optical processes.

2025/05/15 19:22

    - DetectorConstruction.

? Implementation of the messenger to change detector materials to 
have scintillator properties or not. Issues with the command 
when called from the interface. Detector doesn't seem to be 
correctly reinitialized. 


    - Analysis

New analysis_cry macro to analyse CRY data to check the CR generation
is okay.

2025/05/22 17:50

    - SensitiveDetector

Adding separate classes to handle different sensitive detectors. 

? For the SiPM class the detection of the photons is not well implemented,
no optical photon is detected by these volumes, I don't know why.

    I have tried: 
    - Declaring a refractive index for the SiPM material.
    - Declaring an optical surface between the SiPM material and the 
    scintillator bars.
    - Declaring both.
    ? Maybe there is a gap between the volumes ? Not likely I think

    - DetectorConstruction

Some functions for dealing with the setMode command have been implemented
in order to find the best solution to be able to run the command from the 
user interface. Up until now it seems to work if the mode is changed before
running the executable.

Running the command from the interface is giving problems

    Bugs in the implementation:
    - Changing the mode from PARAMETERIZED to INTERNAL and then 
    running some vis commands seems to be rebuilding the detector 
    construction correctly but the materials are not changed correctly
    and there is no generation of optical photons.
    - Changin the mode from INTERNAL to PARAMETERIZED doesn't change
    the detector correclty, not even in the visor, it seems that the detector 
    ends up being destroyed somehow.
    - If we run the command setting the output from CRY to true, there is 
    some bug with the generation of the files. The analysis manager needs
    to be reinitialized.

